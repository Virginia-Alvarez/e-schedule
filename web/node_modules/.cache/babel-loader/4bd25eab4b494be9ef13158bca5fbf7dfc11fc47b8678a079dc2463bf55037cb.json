{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vir/proyectos-personales/e-schedule/web/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vir/proyectos-personales/e-schedule/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vir/proyectos-personales/e-schedule/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from'./Header';import{useEffect,useState}from'react';import treatmentsApi from'../services/api-treatments';import IsUserAuthenticated from'../hooks/IsUserAuthenticated';import{getCurrentWeek}from'../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Week=function Week(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),treatments=_useState2[0],setTreatments=_useState2[1];var _useState3=useState(new Date().getDay()),_useState4=_slicedToArray(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1];var auth=IsUserAuthenticated();useEffect(function(){var doctor=auth();if(doctor){retrieveTreatmenst(doctor);}},[props.doctorId,props.date,props]);var retrieveTreatmenst=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(doctor){var week,treatments,day;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:week=getCurrentWeek();treatments=[];_context.t0=_regeneratorRuntime().keys(week);case 3:if((_context.t1=_context.t0()).done){_context.next=9;break;}day=_context.t1.value;_context.next=7;return treatmentsApi.getTreatmentsFromApi(doctor.doctorId,week[day]).then(function(response){treatments.push(response);});case 7:_context.next=3;break;case 9:setTreatments(treatments);case 10:case\"end\":return _context.stop();}}},_callee);}));return function retrieveTreatmenst(_x){return _ref.apply(this,arguments);};}();var handleSelectedDate=function handleSelectedDate(ev){var date=ev.target.getAttribute(\"data-id\");setSelectedDate(date);};var renderTreatments=function renderTreatments(day){var _treatments;return(_treatments=treatments[day-1])===null||_treatments===void 0?void 0:_treatments.map(function(treatment){return/*#__PURE__*/_jsxs(\"section\",{className:\"section-hour\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"info\",children:treatment.date}),/*#__PURE__*/_jsx(\"p\",{className:\"info\",children:treatment.hour}),/*#__PURE__*/_jsx(\"p\",{className:\"info\",children:treatment.description})]});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-week\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectedDate,\"data-id\":\"1\",href:\"\",children:\"Lunes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectedDate,\"data-id\":\"2\",href:\"\",children:\"Martes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectedDate,\"data-id\":\"3\",href:\"\",children:\"Mi\\xE9rcoles\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectedDate,\"data-id\":\"4\",href:\"\",children:\"Jueves\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectedDate,\"data-id\":\"5\",href:\"\",children:\"Viernes\"})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"mainSchedule\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title-schedule\"}),renderTreatments(selectedDate)]})]});};export default Week;","map":{"version":3,"names":["Header","useEffect","useState","treatmentsApi","IsUserAuthenticated","getCurrentWeek","Week","props","treatments","setTreatments","Date","getDay","selectedDate","setSelectedDate","auth","doctor","retrieveTreatmenst","doctorId","date","week","day","getTreatmentsFromApi","then","response","push","handleSelectedDate","ev","target","getAttribute","renderTreatments","map","treatment","hour","description"],"sources":["/Users/vir/proyectos-personales/e-schedule/web/src/components/Week.js"],"sourcesContent":["import Header from './Header';\nimport { useEffect, useState } from 'react';\nimport treatmentsApi from '../services/api-treatments';\nimport IsUserAuthenticated from '../hooks/IsUserAuthenticated';\nimport { getCurrentWeek } from '../utils/utils';\n\nconst Week=(props)=>{\n    const [treatments, setTreatments] = useState ([]);\n    const [selectedDate, setSelectedDate] = useState (new Date().getDay());\n    const auth = IsUserAuthenticated();\n    useEffect(() => {\n        const doctor = auth();\n        if(doctor) {\n            retrieveTreatmenst(doctor);\n        }\n      }, [props.doctorId, props.date, props]);\n\n    const retrieveTreatmenst = async (doctor) => {\n        const week = getCurrentWeek();\n        const treatments = [];\n        for(let day in week){\n            await treatmentsApi.getTreatmentsFromApi(doctor.doctorId, week[day]).then(response => {\n                treatments.push(response);\n            });\n        }\n        setTreatments(treatments);\n    }  \n\n    const handleSelectedDate = (ev) => {\n        const date =  ev.target.getAttribute(\"data-id\");\n        setSelectedDate(date);\n    }\n\n    const renderTreatments = (day) => {\n        return treatments[day - 1]?.map((treatment) => {\n            return (\n                <section className='section-hour'>\n                    <p className=\"info\">{treatment.date}</p>\n                    <p className=\"info\">{treatment.hour}</p>\n                    <p className=\"info\">{treatment.description}</p>\n                </section>\n            );\n        });\n    }\n    return(\n        <>\n        <Header/>\n        <nav className='nav-week'>\n            <button onClick={handleSelectedDate} data-id=\"1\" href=\"\">Lunes</button>\n            <button onClick={handleSelectedDate} data-id=\"2\" href=\"\">Martes</button>    \n            <button onClick={handleSelectedDate} data-id=\"3\" href=\"\">Mi√©rcoles</button>\n            <button onClick={handleSelectedDate} data-id=\"4\" href=\"\">Jueves</button>\n            <button onClick={handleSelectedDate} data-id=\"5\" href=\"\">Viernes</button>\n        </nav>\n         <article className='mainSchedule'>\n            <h1 className='title-schedule'></h1>\n            {renderTreatments(selectedDate)}\n        </article>\n        </>\n    )\n}\n\nexport default Week;"],"mappings":"4ZAAA,MAAOA,OAAM,KAAM,UAAU,CAC7B,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAOC,cAAa,KAAM,4BAA4B,CACtD,MAAOC,oBAAmB,KAAM,8BAA8B,CAC9D,OAASC,cAAc,KAAQ,gBAAgB,CAAC,6IAEhD,GAAMC,KAAI,CAAC,QAALA,KAAI,CAAEC,KAAK,CAAG,CAChB,cAAoCL,QAAQ,CAAE,EAAE,CAAC,wCAA1CM,UAAU,eAAEC,aAAa,eAChC,eAAwCP,QAAQ,CAAE,GAAIQ,KAAI,EAAE,CAACC,MAAM,EAAE,CAAC,yCAA/DC,YAAY,eAAEC,eAAe,eACpC,GAAMC,KAAI,CAAGV,mBAAmB,EAAE,CAClCH,SAAS,CAAC,UAAM,CACZ,GAAMc,OAAM,CAAGD,IAAI,EAAE,CACrB,GAAGC,MAAM,CAAE,CACPC,kBAAkB,CAACD,MAAM,CAAC,CAC9B,CACF,CAAC,CAAE,CAACR,KAAK,CAACU,QAAQ,CAAEV,KAAK,CAACW,IAAI,CAAEX,KAAK,CAAC,CAAC,CAEzC,GAAMS,mBAAkB,4FAAG,iBAAOD,MAAM,4IAC9BI,IAAI,CAAGd,cAAc,EAAE,CACvBG,UAAU,CAAG,EAAE,wCACNW,IAAI,qEAAXC,GAAG,yCACDjB,cAAa,CAACkB,oBAAoB,CAACN,MAAM,CAACE,QAAQ,CAAEE,IAAI,CAACC,GAAG,CAAC,CAAC,CAACE,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAClFf,UAAU,CAACgB,IAAI,CAACD,QAAQ,CAAC,CAC7B,CAAC,CAAC,qCAENd,aAAa,CAACD,UAAU,CAAC,CAAC,uDAC7B,kBATKQ,mBAAkB,4CASvB,CAED,GAAMS,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,EAAE,CAAK,CAC/B,GAAMR,KAAI,CAAIQ,EAAE,CAACC,MAAM,CAACC,YAAY,CAAC,SAAS,CAAC,CAC/Cf,eAAe,CAACK,IAAI,CAAC,CACzB,CAAC,CAED,GAAMW,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIT,GAAG,CAAK,iBAC9B,mBAAOZ,UAAU,CAACY,GAAG,CAAG,CAAC,CAAC,sCAAnB,YAAqBU,GAAG,CAAC,SAACC,SAAS,CAAK,CAC3C,mBACI,iBAAS,SAAS,CAAC,cAAc,wBAC7B,UAAG,SAAS,CAAC,MAAM,UAAEA,SAAS,CAACb,IAAI,EAAK,cACxC,UAAG,SAAS,CAAC,MAAM,UAAEa,SAAS,CAACC,IAAI,EAAK,cACxC,UAAG,SAAS,CAAC,MAAM,UAAED,SAAS,CAACE,WAAW,EAAK,GACzC,CAElB,CAAC,CAAC,CACN,CAAC,CACD,mBACI,wCACA,KAAC,MAAM,IAAE,cACT,aAAK,SAAS,CAAC,UAAU,wBACrB,eAAQ,OAAO,CAAER,kBAAmB,CAAC,UAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,mBAAe,cACvE,eAAQ,OAAO,CAAEA,kBAAmB,CAAC,UAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,oBAAgB,cACxE,eAAQ,OAAO,CAAEA,kBAAmB,CAAC,UAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,0BAAmB,cAC3E,eAAQ,OAAO,CAAEA,kBAAmB,CAAC,UAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,oBAAgB,cACxE,eAAQ,OAAO,CAAEA,kBAAmB,CAAC,UAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,qBAAiB,GACvE,cACL,iBAAS,SAAS,CAAC,cAAc,wBAC9B,WAAI,SAAS,CAAC,gBAAgB,EAAM,CACnCI,gBAAgB,CAACjB,YAAY,CAAC,GACzB,GACP,CAEX,CAAC,CAED,cAAeN,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}